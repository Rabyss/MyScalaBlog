@import me.lsbengine.database.model.Token
@import me.lsbengine.database.model.Post
@import me.lsbengine.server.BlogConfiguration
@import com.github.nscala_time.time.Imports._
@import me.lsbengine.components.html.{header, footer}
@(token: Token, posts: List[Post])
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="/css/styles.css">
        <script src="/js/@if(BlogConfiguration.appContext == "DEV") {jquery-3.1.1.js} else {jquery-3.1.1.min.js}"></script>
        <script src="/js/admin.js"></script>
        <title>@Html(BlogConfiguration.blogOwner)'s Blog</title>
    </head>
    <body><div class="page-wrap">
    @header.render()
        <h3>
            Logged in as @token.userName.
        </h3>
        @for(post <- posts) {
            @defining(DateTimeFormat.forPattern("dd-MM-yyyy' at 'HH:mm:ss' (UTC)'")) { formatter =>
                <div class="post-summary">
                    <h4>@post.title</h4>
                    @post.summary
                    <div class="date">@post.published.toString(formatter)</div>
                    <input type="button" onclick="edit(@post.id)" value="Edit"/>
                </div>
            }
        }
        <input type="button" onclick="doLogout()" value="Logout"/>
    </div>
     @footer.render()
    </body>
</html>