@import me.lsbengine.server.BlogConfiguration
@import me.lsbengine.database.model.Post
@import me.lsbengine.database.model.Token
@import me.lsbengine.components.html.{header, footer}
@import me.lsbengine.components.admin.html.navbar
@(token: Token, post: Post, add: Boolean)
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="/css/styles.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
        <script src="https://cdn.rawgit.com/showdownjs/showdown/1.6.3/dist/showdown.min.js"></script>
        <script src="/js/@if(BlogConfiguration.appContext == "DEV") {jquery-3.1.1.js} else {jquery-3.1.1.min.js}"></script>
        <script src="/js/admin.js"></script>
        <script src="/js/editpost.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
        <title>@Html(BlogConfiguration.blogOwner)'s Blog</title>
        <script>
            hljs.configure({languages: []});
        </script>
    </head>
    <body><div class="page-wrap">
        @navbar.render("")
        @header.render()
    <h3>
            Logged in as @token.userName.
    </h3>
        <div id="form-error" class="error" style="display: none"></div>
        <div id="form-success" class="success" style="display: none"></div>
        <form class="post-edit-form" name="post-edit">
            <div class="label-field title">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" value="@post.title"/>
            </div>
            <div class="label-field summary">
                <label for="summary">Summary:</label>
                <textarea id="summary" name="summary" rows="2" cols="100">@post.summary</textarea>
            </div>
            <div class="label-field content">
                <label for="contentmarkdown">Content:</label>
                <textarea id="contentmarkdown" name="contentmarkdown">@post.contentMarkdown</textarea>
            </div>
            <div class="label-field-date publication">
                <label for="publication">Publication:</label>
                <input type="datetime-local" id="publication" name="publication" value="1970-01-01T00:00"/>
            </div>
            <input type="hidden" name="id" value="@post.id">
            <input type="hidden" name="csrf" value="@token.csrf">
            <input type="hidden" name="actualdate" id="actualdate" value="@post.published.getMillis">
            <div class="buttons">
                <input type="button" onclick="showPreview()" value="Preview"/>
                <input type="button" onclick="updatePost(@add)" value="@if(add){Create} else {Update}"/>
                <input type="button" onclick="publish(@add)" value="Publish">
                <input type="button" onclick="backHome()" value="Quit Editing" />
            </div>
        </form>
        <div class="loader"></div>
        <div class="preview posts">
            <hr/>
            <div class="post"></div>
            <hr/>
            <input type="button" onclick="hidePreview()" value="Hide Preview"/>
        </div>
    </div>
    @footer.render()
    </body>
</html>