@import me.lsbengine.database.model.{Post, NavBarConf, AboutMe, Categories}
@import me.lsbengine.components.public.html.{head, header, navbar, postitem}
@import me.lsbengine.components.html.footer
@(posts: List[Post], navBarConf: NavBarConf, categories: Categories, aboutMe: AboutMe,curCat: Option[String], page: Int, postsPerPage: Int)
<!DOCTYPE html>
<html lang="en">
    @head.render()
    <body><div class="page-wrap">
        @if(navBarConf.projects || navBarConf.about){
            @navbar.render("Home", navBarConf)
        }
        @header.render()
        <div class="docs">
            @*
            This syntax solves a glitch with HTML generation, never use Option.get otherwise
            *@
            @if(aboutMe.introduction.nonEmpty){
                <div class="doc">@Html(aboutMe.introduction.get.html)</div>
            }
            
            @for(title <- categories.titles.sortBy(_.order)) {
            	<i><a href="?category=@title.title">@title.title</a></i>
            }
            
            @if(posts.nonEmpty) {
	            @for(p <- posts.init) {
	                <div class="doc underline">
	                    @postitem.render(p)
	                </div>
	            }
               	<div class="doc">
                   	@postitem.render(posts.last)
               	</div>
            } else {
                <div>Nothing more to see here :(</div>
            }
            <div>
            <br/>
            @if(page > 1){<a href="?page=@(page-1)&posts_per_page=@postsPerPage@if(curCat.nonEmpty){&category=@(curCat.get)}">}&lt;@if(page > 1){</a>}
            @page
            <a href="?page=@(page+1)&posts_per_page=@postsPerPage@if(curCat.nonEmpty){&category=@(curCat.get)}">&gt;</a>
            </div>
        </div>
    </div>
    @footer.render()
    </body>
</html>